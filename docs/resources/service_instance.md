---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "railway_service_instance Resource - terraform-provider-railway"
subcategory: ""
description: |-
  Railway service instance - environment-scoped service configuration.
  This resource allows you to configure a service instance for a specific environment,
  including setting the source image independently per environment.
  Unlike railway_service which sets the source image at the project level (affecting all environments),
  this resource lets you deploy different images to staging vs production environments.
  Example Usage
  ```hcl
  Create the service (project-scoped)
  resource "railwayservice" "api" {
    name       = "api"
    projectid = railway_project.main.id
  }
  Configure staging instance with staging image
  resource "railwayserviceinstance" "apistaging" {
    serviceid     = railwayservice.api.id
    environmentid = railwayenvironment.staging.id
    sourceimage   = "ghcr.io/myorg/api:staging"
  registrycredentialsusername = var.ghcrusername
    registrycredentialspassword = var.ghcrtoken
  }
  Configure production instance with production image
  resource "railwayserviceinstance" "apiproduction" {
    serviceid     = railwayservice.api.id
    environmentid = railwayenvironment.production.id
    sourceimage   = "ghcr.io/myorg/api:v1.2.3"
  registrycredentialsusername = var.ghcrusername
    registrycredentialspassword = var.ghcrtoken
  }
  ```
---

# railway_service_instance (Resource)

Railway service instance - environment-scoped service configuration.

This resource allows you to configure a service instance for a specific environment,
including setting the source image independently per environment.

Unlike `railway_service` which sets the source image at the project level (affecting all environments),
this resource lets you deploy different images to staging vs production environments.

## Example Usage

```hcl
# Create the service (project-scoped)
resource "railway_service" "api" {
  name       = "api"
  project_id = railway_project.main.id
}

# Configure staging instance with staging image
resource "railway_service_instance" "api_staging" {
  service_id     = railway_service.api.id
  environment_id = railway_environment.staging.id
  source_image   = "ghcr.io/myorg/api:staging"

  registry_credentials_username = var.ghcr_username
  registry_credentials_password = var.ghcr_token
}

# Configure production instance with production image
resource "railway_service_instance" "api_production" {
  service_id     = railway_service.api.id
  environment_id = railway_environment.production.id
  source_image   = "ghcr.io/myorg/api:v1.2.3"

  registry_credentials_username = var.ghcr_username
  registry_credentials_password = var.ghcr_token
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_id` (String) Identifier of the environment.
- `service_id` (String) Identifier of the service.

### Optional

- `redeploy` (Boolean) Whether to trigger a redeployment after updating the service instance. **Default** `true`.
- `registry_credentials_password` (String, Sensitive) Password for private Docker registry authentication.
- `registry_credentials_username` (String) Username for private Docker registry authentication.
- `source_image` (String) Docker image to deploy for this service instance. Conflicts with `source_repo`.
- `source_repo` (String) GitHub repository to deploy for this service instance. Conflicts with `source_image`.

### Read-Only

- `id` (String) Composite identifier of the service instance (service_id:environment_id).


